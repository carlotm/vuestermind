image: node:latest

stages:
    - test
    - deploy

test:
    stage: test
    before_script:
        - npm install
    script:
        - npm run test:unit
    artifacts:
        paths:
            - node_modules/

pages:
    stage: deploy
    script:
        - npm run build
        - mv public public-vue # GitLab Pages hooks on the public folder
        - mv dist public # rename the dist folder (result of npm run build)
    artifacts:
        paths:
            - public

